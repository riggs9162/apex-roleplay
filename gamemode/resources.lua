local workshop = {
    { "104491619", "Metropolice Pack" },
    { "104548572", "Playable Piano" },
    { "105042805", "Combine Admin models" },
    { "105841291", "More Materials!" },
    { "1118211492", "CrowCommunity Content" },
    { "1185975101", "Apex i17 Build 8" },
    { "122969743", "Resistance Turrets" },
    { "128967611", "[Swep] Combine Sniper" },
    { "131410709", "Smoke_Grenade" },
    { "1366149792", "RT Combine Screens" },
    { "173482196", "SProps Workshop Edition" },
    { "175272156", "Metrocop Beta Sounds" },
    { "206166550", "Sabrean's Headcrab Zombie Mod" },
    { "266180263", "Cityruins" },
    { "543527096", "sheild" },
    { "593929594", "food mdl" },
    { "618272585", "Industrial Uniforms" },
    { "619791481", "Hl2 beta PLayermodels" },
    { "676638642", "BMRP Scientist Models" },
    { "728638542", "Vingard crow 2.o" },
    { "732711970", "Portal" },
    { "733021825", "vins stuff" },
    { "741788352", "Airwatch" },
    { "761228248", "cuffs" },
    { "774902402", "guns" }, -- http://steamcommunity.com/sharedfiles/filedetails/?id=774902402
    { "798205573", "lockplymodel" },
    { "822075881", "groundwatch" },
    { "844787757", "Broadcast thing" }
}

if ( SERVER ) then
    resource.AddFile("materials/aerolite/burgericon.vmt")
    resource.AddFile("materials/aerolite/burgericon.vtf")
    resource.AddFile("materials/aerolite/strawberryicon.vmt")
    resource.AddFile("materials/aerolite/strawberryicon.vtf")
    resource.AddFile("materials/darkrp/DarkRPSkin.png")
    resource.AddFile("materials/fadmin/IconView.vmt")
    resource.AddFile("materials/fadmin/IconView.vtf")
    resource.AddFile("materials/fadmin/ListView.vmt")
    resource.AddFile("materials/fadmin/ListView.vtf")
    resource.AddFile("materials/fadmin/back.vmt")
    resource.AddFile("materials/fadmin/back.vtf")
    resource.AddFile("materials/fadmin/icons/MOTD.vmt")
    resource.AddFile("materials/fadmin/icons/MOTD.vtf")
    resource.AddFile("materials/fadmin/icons/Message.vmt")
    resource.AddFile("materials/fadmin/icons/Message.vtf")
    resource.AddFile("materials/fadmin/icons/PickUp.vmt")
    resource.AddFile("materials/fadmin/icons/PickUp.vtf")
    resource.AddFile("materials/fadmin/icons/RCON.vmt")
    resource.AddFile("materials/fadmin/icons/RCON.vtf")
    resource.AddFile("materials/fadmin/icons/ServerSetting.vmt")
    resource.AddFile("materials/fadmin/icons/ServerSetting.vtf")
    resource.AddFile("materials/fadmin/icons/access.vmt")
    resource.AddFile("materials/fadmin/icons/access.vtf")
    resource.AddFile("materials/fadmin/icons/ban.vmt")
    resource.AddFile("materials/fadmin/icons/ban.vtf")
    resource.AddFile("materials/fadmin/icons/changeteam.vmt")
    resource.AddFile("materials/fadmin/icons/changeteam.vtf")
    resource.AddFile("materials/fadmin/icons/chatmute.vmt")
    resource.AddFile("materials/fadmin/icons/chatmute.vtf")
    resource.AddFile("materials/fadmin/icons/cleanup.vmt")
    resource.AddFile("materials/fadmin/icons/cleanup.vtf")
    resource.AddFile("materials/fadmin/icons/cloak.vmt")
    resource.AddFile("materials/fadmin/icons/cloak.vtf")
    resource.AddFile("materials/fadmin/icons/disable.vmt")
    resource.AddFile("materials/fadmin/icons/disable.vtf")
    resource.AddFile("materials/fadmin/icons/freeze.vmt")
    resource.AddFile("materials/fadmin/icons/freeze.vtf")
    resource.AddFile("materials/fadmin/icons/god.vmt")
    resource.AddFile("materials/fadmin/icons/god.vtf")
    resource.AddFile("materials/fadmin/icons/ignite.vmt")
    resource.AddFile("materials/fadmin/icons/ignite.vtf")
    resource.AddFile("materials/fadmin/icons/jail.vmt")
    resource.AddFile("materials/fadmin/icons/jail.vtf")
    resource.AddFile("materials/fadmin/icons/kick.vmt")
    resource.AddFile("materials/fadmin/icons/kick.vtf")
    resource.AddFile("materials/fadmin/icons/noclip.vmt")
    resource.AddFile("materials/fadmin/icons/noclip.vtf")
    resource.AddFile("materials/fadmin/icons/ragdoll.vmt")
    resource.AddFile("materials/fadmin/icons/ragdoll.vtf")
    resource.AddFile("materials/fadmin/icons/slap.vmt")
    resource.AddFile("materials/fadmin/icons/slap.vtf")
    resource.AddFile("materials/fadmin/icons/slay.vmt")
    resource.AddFile("materials/fadmin/icons/slay.vtf")
    resource.AddFile("materials/fadmin/icons/spectate.vmt")
    resource.AddFile("materials/fadmin/icons/spectate.vtf")
    resource.AddFile("materials/fadmin/icons/teleport.vmt")
    resource.AddFile("materials/fadmin/icons/teleport.vtf")
    resource.AddFile("materials/fadmin/icons/voicemute.vmt")
    resource.AddFile("materials/fadmin/icons/voicemute.vtf")
    resource.AddFile("materials/fadmin/icons/weapon.vmt")
    resource.AddFile("materials/fadmin/icons/weapon.vtf")
    resource.AddFile("materials/hl2rp/DermaSkin.png")
    resource.AddFile("materials/models/warz/consumables/consumables_01.vmt")
    resource.AddFile("materials/models/warz/consumables/consumables_01_norm.vtf")
    resource.AddFile("materials/models/warz/consumables/consumables_02.vmt")
    resource.AddFile("materials/models/warz/consumables/consumables_02_norm.vtf")
    resource.AddFile("materials/models/warz/items/bandage1.vmt")
    resource.AddFile("materials/models/warz/items/bandage2.vmt")
    resource.AddFile("materials/models/warz/items/bandage_norm.vtf")
    resource.AddFile("materials/models/warz/items/medkit.vmt")
    resource.AddFile("materials/models/warz/items/medkit_norm.vtf")
    resource.AddFile("models/warz/consumables/medicine.mdl")
    resource.AddFile("models/warz/consumables/painkillers.mdl")
    resource.AddFile("models/warz/items/bandage.mdl")
    resource.AddFile("models/warz/items/medkit.mdl")
    resource.AddFile("sound/Drink.mp3")
    resource.AddFile("sound/death03.mp3")
    resource.AddFile("sound/earthquake.mp3")
    resource.AddFile("sound/earthquake.mp3")

    for _, addon in ipairs(workshop) do
        resource.AddWorkshop(addon[1])
    end
else
    concommand.Add("apex_workshop_view", function(client, cmd, args)
        local frame = vgui.Create("DFrame")
        frame:SetSize(800, 600)
        frame:SetTitle("Apex Workshop Addons")
        frame:Center()
        frame:MakePopup()

        local list = vgui.Create("DListView", frame)
        list:Dock(FILL)
        list:SetMultiSelect(false)
        list:AddColumn("Addon ID")
        list:AddColumn("Addon Name")
        list:AddColumn("Status")
        list:SetSortable(true)

        for _, addon in ipairs(workshop) do
            steamworks.FileInfo(addon[1], function(info)
                if ( info and !info.title:lower():find("hidden addon") ) then
                    list:AddLine(info.id, info.title, "Visible")
                else
                    list:AddLine(addon[1], addon[2], "Hidden")
                end
            end)
        end

        list:SortByColumn(1, false)
        list.OnRowRightClick = function(_, _, line)
            local menu = DermaMenu()
            menu:AddOption("View Addon", function()
                local id = line:GetValue(1)
                local url = "https://steamcommunity.com/sharedfiles/filedetails/?id=" .. id
                gui.OpenURL(url)
            end)
            menu:AddOption("Copy Addon ID", function()
                SetClipboardText(line:GetValue(1))
                LocalPlayer():Notify("Addon ID copied to clipboard!")
            end)
            menu:Open()
        end
    end)

    util.PrecacheSound("earthquake.mp3")
end